<!DOCTYPE html>
<html>
  <head>
	<script type="text/javascript" src="/charts/js/lib/d3.js" charset="utf-8"></script>
	<script type="text/javascript" src="/charts/js/const.js"></script>
	<script type="text/javascript" src="/charts/js/funcs.js"></script>
	<script type="text/javascript" src="/charts/js/candles.js"></script>
	<script type="text/javascript" src="/charts/js/obv.js"></script>
	<script type="text/javascript" src="/charts/js/macd.js"></script>
	<link rel="stylesheet" type="text/css" href="/charts/css/chart.css">
	<title>EOD OHLC Candles</title>
  </head>
  <body>
	<div class="ctrls">
		<label for="daysPer">Days/Candle: </label><input type="number" value="1" id="daysPer"/>
		<label for="volmult">Volume: </label><input type="range" max="0.001" value="0.00001" min="0.0000001" step="0.0000001" id="volmult"/>
		<select id="symselect"></select>
	</div>
	<br/>
	<div class="candlesticks"></div>
	<br/>
	<div class="obv">
		<span class="indicatorInputs">OBV:
			<input type="checkbox" id="obvPoints"/><label for="obvPoints">Points</label>
		</span>
	</div>
	<br/>
	<div class="macd">
		<span class="indicatorInputs">MACD:
			<input type="checkbox" id="macdPoints"/><label for="macdPoints">Mpts</label>
			<input type="checkbox" id="sigPoints"/><label for="sigPoints">Spts</label>
			<input type="checkbox" id="macdHisto"/><label for="macdHisto">Histogram</label>
		</span>
	</div>
	
	<script type="text/javascript">
		
	var daysPerCandle = d3.select("#daysPer").attr("value"),
	yTicks = 10,
	volmult = 0.000001,
	symbolsLoaded = false,
	histDepth = getHistDepth(),
	fullData;

	function fetchData() {
		
		if (symbolsLoaded == false) {
			d3.json(dataServer + '/symbols.json?order=biggest', function(d) {

				d3.select("#symselect").selectAll("option")
					.data(d).enter()
					.append("option")
					.attr("value", function(d) { return d })
					.text(String)
			});
			
			symbolsLoaded = true;
		}

		d3.json(dataServer + '/eod.json'
				+ '?symbol=' + location.hash.substr(1)
				+ '&depth=' + histDepth
				+ '&dpc=' + daysPerCandle,
				buildCandles);
	}

	</script>
	<script type="text/javascript" src="/charts/js/events.js"></script>
  </body>
</html>





